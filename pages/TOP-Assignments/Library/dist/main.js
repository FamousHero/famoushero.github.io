(()=>{document.getElementById("new-book").addEventListener("click",(function(){e.disabled=!1,n.style.display="block",setTimeout((function(){return n.classList.remove("hidden")}),1)}));var e=document.getElementById("add-book");function t(){n.classList.add("hidden"),e.disabled=!0,setTimeout((function(){return n.style.display="none"}),500)}e.addEventListener("click",(function(e){var n=document.getElementById("form");if(""!==n.title.value&&""!==n.author.value&&/^[0-9]+$/.test(n.pages.value)){var r,d,c,s,u=(r=n.title.value,d=n.author.value,c=n.pages.value,s=n.read.checked,Object.assign(Object.create(i),{title:r,author:d,pages:c,read:s}));a.push(u),l(),o(),n.reset(),t()}}));var n=document.getElementById("popup");n.addEventListener("click",t),document.getElementById("book-info").addEventListener("click",(function(e){"SPAN"===e.target.tagName&&document.getElementById("pages-input").focus(),e.stopPropagation()})),document.getElementById("clear-library").addEventListener("click",(function(){localStorage.removeItem("myLibrary"),a=[],o()}));var a=[],r=[],i={info:function(){var e=this.title+" by "+this.author+", "+this.pages+" pages, ";return this.read?e+="read.":e+="not read yet. ",e}};function d(){this.book.read=!this.book.read,l(),o()}function o(){for(var e=document.getElementById("library").firstChild.nextSibling,t=e.childNodes.length,n=2;n<t;++n)r[n-2].removeEventListener("click",d),e.childNodes[2].remove();for(var i=0;i<a.length;++i)c(a[i])}function c(e){var t=document.getElementById("library"),n=document.createElement("tr"),a=document.createElement("td"),i=document.createElement("td"),o=document.createElement("td"),c=document.createElement("td"),l=document.createElement("input");c.classList.add("read-cell"),l.setAttribute("type","checkbox"),l.book=e,a.innerText=e.title,i.innerText=e.author,o.innerText=e.pages,l.checked=e.read,l.addEventListener("click",d),r.push(l),c.append(l),n.append(a,i,o,c),t.firstChild.nextSibling.appendChild(n)}function l(){localStorage.setItem("myLibrary",JSON.stringify(a))}!function(){if(localStorage.myLibrary){var e=localStorage.getItem("myLibrary");e=JSON.parse(e),a=e,o()}}()})();